@model TournamentCreateVM
@{
    Layout = "_Layout1";
}

<form asp-action="CreateT" asp-controller="Tournament" method="post" class="p-4 w-75 mx-auto shadow">

    <div class="mb-3">
        <label>Turnuva İsmi:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.Name"></span>
        <input asp-for="@Model.Tournament.Name" class="form-control" />
    </div>
    <div class="mb-3">
        <label>Turnuva Konumu:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.Place"></span>
        <input asp-for="@Model.Tournament.Place" class="form-control" />
    </div>
    <div class="form-group">
        <label>Turnuva Sistemi:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.System"></span>

        <select class="form-control" asp-for="@Model.Tournament.System">
            <option>Seçiniz</option>
            <option>BG System</option>
            <option>Bracket</option>
        </select>
    </div>
    <div class="form-group">
        <label>Turnuva Tipi:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.Type"></span>

        <select class="form-control" asp-for="@Model.Tournament.Type">
            <option value="">Seçiniz</option>
            <option value="Kazananlar Eşleşir">Kazananlar Eşleşir</option>
            <option value="Kaybedenler Eşleşir">Kaybedenler Eşleşir</option>
            <option value="Aynı Haklılar Eşleşir">Aynı Haklılar Eşleşir</option>
            <option value="Rastgele">Rastgele</option>
        </select>
    </div>
    <div class="form-group">
        <label>Oynama Hakkı:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.PlayLife"></span>

        <select class="form-control" asp-for="@Model.Tournament.PlayLife">
            <option>Seçiniz</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
        </select>
    </div>
    <div class="mb-3">
        <label>Başlama Zamanı:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.StartDate"></span>
        <div class="input-group date" id="datepicker" data-target-input="nearest">
            <input class="form-control datetimepicker-input" data-target="#datepicker" asp-for="@Model.Tournament.StartDate" />
            <div class="input-group-append" data-target="#datepicker" data-toggle="datetimepicker">
            </div>
        </div>
    </div>
    <div class="form-group">
        <label>Bye Tipi:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.ByeType"></span>

        <select class="form-control" asp-for="@Model.Tournament.ByeType">
            <option>Seçiniz</option>
            <option>En Az Kaybedenler</option>
            <option>En Az Kazananlar</option>
            <option>Rastgele</option>
        </select>
    </div>
    <div class="mb-3">
        <label>Masa Başlangıç:</label>
        <span class="text-danger" asp-validation-for="@Model.Tournament.TableStart"></span>
        <input asp-for="@Model.Tournament.TableStart" class="form-control" value="1" />
    </div>

    <div class="mb-3">
        <label for="userSearch">Oyuncu Ara:</label>
        <input type="text" id="userSearch" class="form-control" placeholder="Ara">
    </div>
    <table class="table w-100" id="userTable">
        <thead>
            <tr>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Users != null)
            {
                @foreach (var user in Model.Users)
                {
                    <tr>
                        <td><input type="checkbox" name="Id[]" value="@user.Id" /></td>
                        <td>@user.Name</td>
                    </tr>
                }
            }        
        </tbody>
    </table>

    <button type="submit" class="btn btn-primary">Kaydet</button>

    <div class="text-danger mt-2" asp-validation-summary="ModelOnly">
    </div>
</form>
@section Script {
    <script>
        // jQuery code to handle search
        $(document).ready(function () {
            $('#userSearch').on('input', function () {
                var searchText = $(this).val().toLowerCase();
                $('#userTable tbody tr').each(function () {
                    var name = $(this).find('td:last-child').text().toLowerCase();
                    if (name.includes(searchText)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
        });
    </script>
}
